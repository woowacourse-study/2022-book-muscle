## ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive - Ch26 ES6 í•¨ìˆ˜ì˜ ì¶”ê°€ ê¸°ëŠ¥

ğŸ’¡ ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œê³¼ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ(17.2.4 ì ˆì— ìì„¸íˆ ì„¤ëª…ë¼ ìˆë‹¤.)
- ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. => callable
- ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. => constructor
    - ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ === new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
- ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤. => non-constructor


### í•¨ìˆ˜ì˜ êµ¬ë¶„
- ES6 ì´ì „ì˜ ëª¨ë“  í•¨ìˆ˜ë“¤ì€ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆì—ˆìœ¼ë©°, ìƒì„±ì í•¨ìˆ˜ë¡œì„œë„ í˜¸ì¶œì´ ê°€ëŠ¥í–ˆë‹¤.(17.2.4 ì ˆì— ìì„¸íˆ ì„¤ëª…ë¼ ìˆë‹¤.)
    - ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤. => callable
    - ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤. => constructor
        - ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤ === new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

```javascript
function test() {}

test(); // ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
new test(); // ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œ
```

- ES6 ì´ì „ì— ê°ì²´ì˜ í”„ë¡œí¼í‹°ì— ë°”ì¸ë”©ëœ í•¨ìˆ˜ë¥¼ ë©”ì„œë“œë¼ ë¶ˆë €ëŠ”ë°, ì´ ë©”ì„œë“œë„ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•˜ë©° ìƒì„±ì í•¨ìˆ˜ë¡œë„ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.
```javascript
const testObj = {
    testNum: 1000,
    testFunc: function () {
        return this.testNum;
    }
}

console.log(testObj.testFunc()); // 1000

// ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
const normalFunc = testObj.testFunc;
console.log(normalFunc()); // undefined

// ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œ
console.log(new testObj.testFunc) // testFunc {}
```

- ES6ì—ì„œëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª©ì ì— ë”°ë¼ í¬ê²Œ ì„¸ ê°€ì§€ ì¢…ë¥˜ë¡œ êµ¬ë¶„ì„ í–ˆë‹¤.

|ES6 í•¨ìˆ˜ì˜ êµ¬ë¶„|constructor|prototype|super|arguments|
|:---:|:---:|:---:|:---:|:---:|
|ì¼ë°˜ í•¨ìˆ˜|O|O|X|O|
|ë©”ì„œë“œ|X|X|O|O|
|í™”ì‚´í‘œ í•¨ìˆ˜|X|X|X|X|

### ë©”ì„œë“œ
- ES6ë¶€í„° ë©”ì„œë“œëŠ” ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ìœ¼ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë§Œì„ ì˜ë¯¸í•œë‹¤.

- ë©”ì„œë“œëŠ” constructorê°€ ì•„ë‹ˆë‹¤.
    - ë”°ë¼ì„œ prototype í”„ë¡œí¼í‹°ê°€ ì—†ê³ , í”„ë¡œí† íƒ€ì…ë„ ìƒì„±í•˜ì§€ ì•ŠëŠ”ë‹¤.
```javascript
const testObj = {
    foo: function () {
        console.log('ì´ê²ƒì€ ë©”ì„œë“œê°€ ì•„ë‹ˆì—¬~');
    },
    bar() {
        console.log('ì´ê²ƒì€ ë©”ì„œë“œ!');
    },
}

// ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œ
testObj.foo();
testObj.bar();

// ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œ - ë©”ì„œë“œëŠ” constructorê°€ ì•„ë‹ˆë‹¤.
new testObj.foo();
new testObj.bar(); // TypeError: testObj.bar is not a constructor
```
- ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ super í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - ë©”ì„œë“œëŠ” ìì‹ ì„ ë°”ì¸ë”©í•œ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë‚´ë¶€ ìŠ¬ë¡ `[[HomeObject]]`ë¥¼ ê°–ëŠ”ë‹¤.

### í™”ì‚´í‘œ í•¨ìˆ˜
- í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisê°€ ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ëŒ€ì•ˆìœ¼ë¡œ ìœ ìš©í•˜ë‹¤.

- ë§¤ê°œ ë³€ìˆ˜ ì„ ì–¸

```javascript
const test1 = (x, y) => x + y; // ë§¤ê°œ ë³€ìˆ˜ëŠ” ì†Œê´„í˜¸ì— ê°ì‹¸ì„œ ì „ë‹¬

const test2 = x => x + 10; // ë§¤ê°œ ë³€ìˆ˜ê°€ í•˜ë‚˜ë¼ë©´ ì†Œê´„í˜¸ ìƒëµ ê°€ëŠ¥

const test3 = () => 100; // ë§¤ê°œ ë³€ìˆ˜ê°€ ì—†ìœ¼ë©´ ì†Œê´„í˜¸ ìƒë ¥ ë¶ˆê°€
```

- [ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜(IIFE, Immediately Invoked Function Expression)](https://developer.mozilla.org/ko/docs/Glossary/IIFE)ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.

```javascript
// ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ ì‹¤í–‰
const result = ((num) => num + 100)(200);

console.log(result) // 300
```

### í™”ì‚´í‘œ í•¨ìˆ˜ì™€ ì¼ë°˜ í•¨ìˆ˜ì˜ ì°¨ì´
1. í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” non-constructor ì´ë‹¤.
    - ë”°ë¼ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ë‹¤.

```javascript
const foo = () => {
    console.log('ê³¼ì—° ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆì„ê¹Œ?');
}

new foo(); // TypeError: foo is not a constructor
```

2. ì¤‘ë³µëœ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ì„ ì„ ì–¸í•  ìˆ˜ ì—†ë‹¤.
```javascript
const foo = (num, num) => num + num; // SyntaxError: Duplicate parameter name not allowed in this context
```

3. í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” í•¨ìˆ˜ ìì²´ì˜ this, arguments, super, new.target ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.
- ë”°ë¼ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìœ„ì˜ ê°’ë“¤ì„ ì°¸ì¡°í•˜ë©´, ìƒìœ„ ìŠ¤ì½”í”„ì˜ ê°’ì„ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.

â—ï¸ [new.target](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/new.target)ì€ í•¨ìˆ˜ ë˜ëŠ” ìƒì„±ìê°€ new ì—°ì‚°ìë¡œ í˜¸ì¶œëëŠ”ì§€ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë‹¤.

```javascript
function foo() {
    if (!new.target) {
        console.log('ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ì§€ ì•Šì•˜ë‹¤.');
    }

    console.log(`ì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œëë‹¤. ${new.target}`);
}

foo(); // ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ì§€ ì•Šì•˜ë‹¤.
new foo(); // ì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œëë‹¤. function foo () { ... }
```

4. í™”ì‚´í‘œ í•¨ìˆ˜ì˜ this
- í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” this ë°”ì¸ë”©ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤.
- ë”°ë¼ì„œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ thisë¥¼ ì°¸ì¡°í•˜ë©´ ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ì°¸ì¡°í•œë‹¤.
    - ì´ë¥¼ lexical thisë¼ê³  í•œë‹¤.
    - ì¦‰, í™”ì‚´í‘œ í•¨ìˆ˜ì˜ thisëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ì²˜ëŸ¼ **í•¨ìˆ˜ê°€ ì •ì˜ëœ ìœ„ì¹˜ì— ì˜í•´ ê²°ì •ì´ ëœë‹¤.**
ï¸
```javascript
// í™”ì‚´í‘œ í•¨ìˆ˜ì˜ thisëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬í‚¨ë‹¤.
const testObj = {
    num: 1,
    // í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    test: () => { console.log(this.num) }
};

testObj.test(); // undefined
```

5. í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” this ë°”ì¸ë”©ì´ ì—†ìœ¼ë¯€ë¡œ, `call, apply, bind` ë©”ì„œë“œë¡œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisë¥¼ êµì²´í•  ìˆ˜ ì—†ë‹¤.

6. í´ë˜ìŠ¤ í•„ë“œì— í• ë‹¹í•œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ì˜ this
- ëª¨ë“  í´ë˜ìŠ¤ í•„ë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹°ê°€ ëœë‹¤.
    - í•´ë‹¹ ë‚´ìš©ì€ 25.7.3 ì ˆì— ìì„¸íˆ ì„¤ëª…ë˜ì–´ ìˆë‹¤.

- í™”ì‚´í‘œ í•¨ìˆ˜ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í´ë˜ìŠ¤ ì™¸ë¶€(= ì „ì—­ ìŠ¤ì½”í”„)ì´ì§€ë§Œ, this ì°¸ì¡°ê°€ ì›í™œí•˜ê²Œ ì§„í–‰ëœë‹¤.

```javascript
class Test {
    num = 100;

    printNum = () => { 
        console.log(this.num);
    }
}

const test = new Test();
test.printNum(); // 100
```

- ì´ëŸ° í˜„ìƒì˜ ì´ìœ ëŠ” í´ë˜ìŠ¤ í•„ë“œì— í• ë‹¹í•œ í™”ì‚´í‘œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì°¸ì¡°í•œ thisëŠ” constructor ë‚´ë¶€ì˜ this ë°”ì¸ë”©ê³¼ ê°™ê¸° ë•Œë¬¸ì´ë‹¤.
    - constructor ë‚´ë¶€ì˜ this ë°”ì¸ë”©ì€ í´ë˜ìŠ¤ê°€ ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ì¦‰, ìœ„ ì˜ˆì‹œì½”ë“œëŠ” ì•„ë˜ì˜ ì˜ˆì‹œ ì½”ë“œì™€ ë™ì¼í•˜ê²Œ ë™ì‘ëœë‹¤,

```javascript
class Test {
    constructor() {
        this.num = 100;
        this.printNum = () => {
            console.log(this.num);
        }
    }
}

const test = new Test();
test.printNum(); // 100
```

â—ï¸í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ëª¨ë“  ì½”ë“œì—ëŠ” strict modeê°€ ì ìš©ì´ ëœë‹¤. strict modeê°€ ì ìš©ëì„ ë•Œ, ì¼ë°˜ í•¨ìˆ˜ì˜ thisë¥¼ ì°¸ì¡°í•˜ë©´ ì „ì—­ ê°ì²´ê°€ ì•„ë‹ˆê³  undefinedê°€ ë°˜í™˜ëœë‹¤.
